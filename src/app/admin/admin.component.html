<div class="container-fluid">
    <h1 class="title">Admin Dashboard</h1>

    <!-- Display error message if it exists -->
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <div class="d-flex justify-content-center mb-2">
        <div class="btn btn-success mr-2" (click)="navigateTo('mangagestaff')">Quản lí User</div>
        <div class="btn btn-success" (click)="navigateTo('station')"> Quản lí Trạm</div>
    </div>
    <!-- Users and Their Stations Section -->
    <h2 class="user-title">Danh sách User được phân trạm</h2>
     <div class="d-flex justify-content-center">
        
        <div class="d-flex user-table">        
            <table *ngIf="users.length > 0" class="table h-100 table-hover table-striped">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Assigned Station ID</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of users">
                        <td>{{ user.username }}</td>
                        <td>{{ user.assignedStationId }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
     </div>
    
   
    <div *ngIf="users.length === 0">No staff users found.</div>

    <!-- Sensor Data from Stations Section -->
    <h2>Sensor Data from Stations</h2>
    <table *ngIf="stations.length > 0" class="station-table">
        <thead>
            <tr>
                <th>Station ID</th>
                <th>Temperature</th>
                <th>Humidity</th>
                <th>Fan Speed</th>
                <th>LED State</th>
                <th>Buzzer State</th>
                <th>Target Temperature</th>
                <th>Target Humidity</th>
                <th>Medium Temperature</th>
                <th>Medium Humidity</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let station of stations">
                <td>{{ station.id }}</td>
                <td>{{ sensorData[station.id]?.temperature }}</td>
                <td>{{ sensorData[station.id]?.humidity }}</td>
                <td>{{ sensorData[station.id]?.fanSpeed }}</td>
                <td>{{ sensorData[station.id]?.ledState }}</td>
                <td>{{ sensorData[station.id]?.buzzerState }}</td>
                <td>{{ sensorData[station.id]?.targetTemperature }}</td>
                <td>{{ sensorData[station.id]?.targetHumidity }}</td>
                <td>{{ sensorData[station.id]?.mediumTemperature }}</td>
                <td>{{ sensorData[station.id]?.mediumHumidity }}</td>
            </tr>
        </tbody>
    </table>
    <div *ngIf="stations.length === 0">No stations found.</div>
</div>
