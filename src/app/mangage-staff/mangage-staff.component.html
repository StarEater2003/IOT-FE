<div class="container-fluid">
    <div class="row head-title">
        <div class="d-flex justify-content-center col col-md-12">
            <h1>Quản lí người dùng</h1>
        </div>
        <div class="d-flex justify-content-center col col-md-12 menu-bar">
            <div class="btn btn-success" (click)="showAddUserForm = !showAddUserForm">Thêm người dùng</div>
        </div>
    </div>
    <div *ngIf="showAddUserForm" class="mt-3 p-4 border rounded">
        <h4>Thêm người dùng</h4>
        <form (ngSubmit)="addUser()" #userForm="ngForm">
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" id="username" name="username" [(ngModel)]="userModel.username" required />
          </div>
      
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" name="password" [(ngModel)]="userModel.password" required />
          </div>
      
          <div class="form-group">
            <label for="level">Level</label>
            <select class="form-control" id="level" name="level" [(ngModel)]="userModel.level" required>
              <option value="1">Level 1</option>
              <option value="2">Level 2</option>
            </select>
          </div>
      
          <div class="form-group">
            <label for="assignedStationId">Assign Station ID</label>
            <input type="text" class="form-control" id="assignedStationId" name="assignedStationId" [(ngModel)]="userModel.assignedStationId"  />
          </div>
      
          <button type="submit" class="btn btn-primary mt-3">Lưu</button>
          <button type="button" class="btn btn-secondary mt-3 ml-2" (click)="showAddUserForm = false">Hủy</button>
        </form>
      </div>

    
      <div *ngIf="showAddUserForm" class="mt-3 p-4 border rounded">
        <h4>Thêm người dùng</h4>
        <form (ngSubmit)="addUser()" #userForm="ngForm">
          <!-- Ô nhập tên tài khoản -->
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" id="username" name="username" [(ngModel)]="userModel.username" required />
          </div>
      
          <!-- Ô nhập Assign Station ID -->
          <div class="form-group">
            <label for="assignedStationId">Assign Station ID</label>
            <input type="text" class="form-control" id="assignedStationId" name="assignedStationId" [(ngModel)]="userModel.assignedStationId" />
          </div>
      
          <!-- Nút Lưu -->
          <button type="submit" class="btn btn-primary mt-3">Lưu</button>
      
          <!-- Nút Hủy -->
          <button type="button" class="btn btn-secondary mt-3 ml-2" (click)="showAddUserForm = false">Hủy</button>
        </form>
      </div>
      
    <h2 style="text-align: center;margin-top: 20px;">Danh sách tài khoản</h2>
    <div class="table-responsive-xl user-data">
        <table class="table h-100 table-hover table-striped">
            <thead>
                <tr>
                    <th>
                        <span>STT</span>
                    </th>
                    <th>
                        <span>UserName</span>
                    </th>
                    <th> 
                        <span>Password</span>
                    </th>       
                    <th>
                        <span>Account Level</span>
                    </th>
                    <th>
                        <span>Trạm được phân</span>
                    </th>
                    <th class="w-25">
                        <span>Action</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr
                    *ngFor="let staff of staffs | paginate: { itemsPerPage: 5, currentPage: page }; let i = index">
                    <td>
                        <p>{{ (page - 1) * 5 + i + 1 }}</p>
                    </td>
                    <td>
                        {{ staff.username }}
                    </td>
                    <td>
                        {{ staff.password}}
                    </td>
                    <td>
                        {{ staff.level}}
                    </td>
                    <td>
                        {{ staff.assignedStationId}}
                    </td>
                    
                    <td class="d-flex action-menu">
                        <div class="btn btn-info mr-1" (click)="assignStation(staff)">Phân trạm</div>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="d-flex justify-content-end">
            <pagination-controls (pageChange)="page = $event"></pagination-controls>
        </div>

    </div>
</div>